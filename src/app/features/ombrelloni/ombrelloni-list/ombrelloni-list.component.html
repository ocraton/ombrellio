<div class="flex-grid">
  <div class="col">
    <h2 class="titleSection">
      <mat-icon class="icon mr15 valmiddle">deck</mat-icon>
      Ombrelloni
      <br><span style="font-style: italic;font-size: 1rem;">Crea/Modifica la mappa dei tuoi ombrelloni disponendoli sulla griglia</span>
    </h2>
  </div>
</div>

<div *ngIf="!(ombrelloniState | async).loading">

  <mat-form-field class="mt20" style="width: 100%">
    <input matInput placeholder="Cerca" #term (keyup)="setSearch(term.value)" style="width: 100%" />
  </mat-form-field>

  <mat-grid-list
    [cols]="(ombrelloniState | async).mappa.numero_colonne"
    rowHeight="150px"
    cdkDropListGroup >

    <mat-grid-tile
      *ngFor="let tile of mappaGrid; index as i"
      cdkDropList
      (cdkDropListDropped)="dropOmbrellone($event, tile)">
      <!-- <h6>{{ tile.iRiga }}:{{ tile.iColonna }}</h6> -->
      <mat-card class="mat-elevation-z2"
        *ngIf="getOmbrelloneIfExist(tile.iRiga, tile.iColonna) as ombrellone; else addombrellone"
        [cdkDragData]="ombrellone"
        cdkDrag
        cdkDragPlaceholder>
        <mat-card-header>
          <mat-card-title>
            <span><mat-icon>beach_access</mat-icon></span> <br />
            <span style="color: black">{{ ombrellone.numero }} </span>
          </mat-card-title>
        </mat-card-header>
        <mat-card-actions>
          <button
            mat-icon-button
            color="primary"
            (click)="editOmbrellone(ombrellone)">
            <mat-icon>edit</mat-icon>
          </button>
          <button
            mat-icon-button
            color="primary"
            (click)="deleteOmbrellone(ombrellone)">
            <mat-icon>delete</mat-icon>
          </button>
        </mat-card-actions>
      </mat-card>
      <ng-template #addombrellone>
          <button
            (click)="addOmbrellone(tile.iRiga, tile.iColonna)"
            mat-mini-fab
            color="primary"
            aria-label="Nuovo Ombrellone">
            <mat-icon>add</mat-icon>
          </button>
      </ng-template>
    </mat-grid-tile>

  </mat-grid-list>

  <br /><br />
</div>
<div>
  <mat-progress-bar
    mode="indeterminate"
    *ngIf="(ombrelloniState | async).loading"
  ></mat-progress-bar>
</div>
